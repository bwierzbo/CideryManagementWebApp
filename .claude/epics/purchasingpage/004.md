---
title: Invoice Number Auto-generation
created: 2025-09-14T01:14:26Z
epic: purchasingpage
depends_on: [001, 002]
effort: M
hours: 14
parallel: true
---

# Invoice Number Auto-generation

## Description
Implement unique daily sequence generation per vendor using format YYYYMMDD-{vendorId}-{seq}

## Acceptance Criteria
- [ ] Create invoiceNumber.generate tRPC service
- [ ] Implement format: YYYYMMDD-{vendorId}-{seq} with sequential numbering
- [ ] Guarantee uniqueness per vendor per day with database constraints
- [ ] Handle concurrent request race conditions safely
- [ ] Auto-populate invoice number during purchase creation
- [ ] Hide invoice number from UI forms (backend only)

## Technical Details
tRPC service in packages/api, database sequence handling

## Dependencies
[001, 002] (requires schema and migration)

## Effort
Medium (M), 14 hours, parallel: true