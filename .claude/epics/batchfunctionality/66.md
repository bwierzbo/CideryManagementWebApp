---
name: Fermentation Curve - Create SG/ABV chart component with real-time updates
status: open
created: 2025-09-19T21:15:45Z
updated: 2025-09-19T21:07:33Z
github: https://github.com/bwierzbo/CideryManagementWebApp/issues/66
depends_on: [004, 005]  # Requires event system and batch details UI
parallel: true  # Can develop independently once dependencies are ready
conflicts_with: []  # No conflicts
---

# Task: Fermentation Curve - Create SG/ABV chart component with real-time updates

## Description
Implement an interactive fermentation curve visualization component that displays specific gravity (SG) measurements over time and calculates/displays ABV progression. The component provides real-time updates as new measurements are recorded and includes timeline scrubbing for historical analysis.

## Acceptance Criteria
- [ ] Interactive line chart displaying SG measurements over time with date/time x-axis
- [ ] Real-time ABV calculation and display as secondary y-axis or overlay
- [ ] Timeline scrubbing functionality to examine specific data points
- [ ] Responsive design that adapts to different screen sizes
- [ ] Loading states and error handling for measurement data
- [ ] Integration with batch event system to display measurement events
- [ ] Color-coded phases (primary fermentation, secondary, etc.)
- [ ] Hover tooltips showing exact SG, ABV, and timestamp values
- [ ] Export functionality for fermentation data analysis

## Technical Details
- Create FermentationCurve component in apps/web/src/components/cellar/batch/
- Select appropriate chart library (Recharts recommended for React ecosystem consistency)
- Implement dual-axis chart with SG on primary axis and ABV on secondary
- Calculate ABV progression using existing ABV calculation functions from packages/lib
- Connect to batch event API to fetch SG measurement data
- Add real-time data subscription for automatic chart updates
- Implement zoom and pan functionality for detailed analysis
- Create measurement point markers with click/hover interactions
- Add fermentation phase indicators based on measurement patterns
- Design responsive chart container with appropriate mobile breakpoints

## Chart Library Requirements
- React-compatible charting library with TypeScript support
- Dual-axis line chart capabilities
- Interactive tooltips and hover states
- Zoom and pan functionality
- Real-time data updates
- Responsive design support
- Customizable styling to match application theme

## Dependencies
- [ ] Task 004 (Event System Integration) completed for measurement data
- [ ] Task 005 (Batch Details UI) completed for component integration
- [ ] Existing ABV calculation functions available in packages/lib
- [ ] Chart library selected and installed
- [ ] Batch event API endpoints accessible

## Effort Estimate
- Size: M
- Hours: 8-10 hours
- Parallel: true

## Definition of Done
- [ ] FermentationCurve component implemented with all interactive features
- [ ] SG measurements display correctly on timeline with proper scaling
- [ ] ABV calculations accurate and update automatically with new data
- [ ] Timeline scrubbing allows examination of specific measurement points
- [ ] Chart responsive across mobile, tablet, and desktop screen sizes
- [ ] Real-time updates working when new measurements are recorded
- [ ] Error states handled gracefully with user-friendly messages
- [ ] Performance optimized for large datasets (100+ measurements)
- [ ] Component integrated successfully into batch details interface
- [ ] User testing confirms intuitive interaction and data clarity