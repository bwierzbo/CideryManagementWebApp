---
name: Event System Integration - Extend tank measurement/additive workflows to create batch events
status: open
created: 2025-09-19T20:49:20Z
updated: 2025-09-19T21:07:33Z
github: https://github.com/bwierzbo/CideryManagementWebApp/issues/63
depends_on: [002]  # Requires batch API layer
parallel: false  # Must wait for API before event integration
conflicts_with: []  # No conflicts
---

# Task: Event System Integration - Extend tank measurement/additive workflows to create batch events

## Description
Extend existing tank measurement and additive workflows to automatically create batch events, providing seamless integration between vessel operations and batch tracking. This creates a unified event system that captures all batch-related activities through existing user interfaces.

## Acceptance Criteria
- [ ] Tank measurement forms extended to create batch events when vessel has active batch
- [ ] Additive forms integrated to log batch events for all additives/treatments
- [ ] Transfer operations create proper batch events with vessel transitions
- [ ] Event creation is automatic and transparent to operators
- [ ] All existing measurement/additive workflows continue working unchanged
- [ ] Event data properly structured with type-specific payloads
- [ ] Integration with audit system for complete traceability
- [ ] Error handling for batch event creation failures

## Technical Details
- Modify existing tank measurement forms to detect active batches and create events
- Extend additive workflow to generate batch events with treatment details
- Update vessel transfer operations to create batch transition events
- Create event type definitions for measurements, additives, transfers
- Implement event payload schemas for each operation type
- Add batch event creation to existing form submission handlers
- Ensure backward compatibility with non-batch vessel operations
- Integrate with batch API event creation endpoints

## Dependencies
- [ ] Task 002 (Batch API Layer) completed
- [ ] Existing tank measurement forms available
- [ ] Additive workflow system accessible
- [ ] Vessel transfer operations identified

## Effort Estimate
- Size: L
- Hours: 10-14 hours
- Parallel: false

## Definition of Done
- [ ] All tank measurements create corresponding batch events
- [ ] Additive treatments logged as batch events with full details
- [ ] Vessel transfers generate proper batch transition events
- [ ] Event creation transparent to existing user workflows
- [ ] No breaking changes to existing measurement/additive systems
- [ ] Event payloads include all relevant operation data
- [ ] Error handling prevents workflow interruption
- [ ] Integration tests verify event creation for all operation types