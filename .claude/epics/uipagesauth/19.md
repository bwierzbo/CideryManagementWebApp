---
name: Reports Management Page
status: open
created: 2025-09-13T16:01:58Z
updated: 
github: https://github.com//issues/19
depends_on: [001, 002]
parallel: true
conflicts_with: []
---

# Task: Reports Management Page

## Description
Create a comprehensive reports management page with COGS breakdown tables, export functionality, and role-based access controls. The page will provide financial insights into batch profitability and cost structures with appropriate filtering and historical data navigation.

## Acceptance Criteria
- [ ] COGS breakdown table displays with date range filtering and batch selection
- [ ] CSV/PDF export buttons function correctly with role-based visibility (Admin/Operator only)
- [ ] Historical data navigation allows browsing past cost snapshots
- [ ] Read-only view enforced for Operators with admin controls for cost snapshot management
- [ ] Error handling and loading states implemented for all data operations

## Technical Details
- Implement `/apps/web/src/app/reports/page.tsx` with shadcn/ui components
- Integrate with tRPC endpoints for COGS data retrieval and export generation
- Use React Hook Form with date range picker and batch selector components
- Implement role-based UI rendering using session data from Auth.js
- Add export functionality using background worker for large datasets
- Files affected: reports page, COGS components, export utilities, role guards

## Dependencies
- [ ] Authentication system (Task 001) - required for role-based access
- [ ] API endpoints (Task 002) - required for data fetching and exports
- [ ] Database COGS calculation functions - assumed to exist from core system
- [ ] Background worker for export generation - may need extension

## Effort Estimate
- Size: L
- Hours: 16-20
- Parallel: true

## Definition of Done
- [ ] All acceptance criteria met with passing tests
- [ ] Role-based access properly enforced and tested
- [ ] Export functionality works for both CSV and PDF formats
- [ ] UI components follow existing design system patterns
- [ ] Error handling covers network failures and invalid data states
- [ ] Code reviewed and meets project quality standards
