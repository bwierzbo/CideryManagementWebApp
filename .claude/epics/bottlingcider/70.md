---
name: Bottling Modal Component
status: open
created: 2025-09-25T21:30:16Z
updated: 2025-09-25T22:04:53Z
github: https://github.com/bwierzbo/CideryManagementWebApp/issues/70
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Bottling Modal Component

## Description
Create the bottling modal component that opens from vessel cards on the `/cellar` page. The modal collects volume taken, package size, units produced, and shows calculated loss. Integrate with existing vessel card UI following patterns from "Add Measurement" and "Add Additive" modals.

## Acceptance Criteria
- [ ] "Bottle" button appears on vessel cards (only when batch is active)
- [ ] Modal opens with proper form fields
- [ ] Real-time loss calculation as user types
- [ ] Form validation prevents invalid submissions
- [ ] Success handling with redirect options
- [ ] Modal closes properly on cancel/complete
- [ ] Works on mobile/tablet devices

## Technical Details
- Create component: `apps/web/src/components/cellar/BottlingModal.tsx`
- Use React Hook Form with Zod validation
- Reuse existing modal patterns from AddBatchMeasurementForm
- Package sizes: 355ml, 473ml, 500ml, 750ml, 1L, 19.5L, 30L, 50L
- Loss calculation: volumeTaken - (units Ã— unitSize)
- Show warning when loss > 5%
- Two action buttons: "Complete & Go to /packaging" and "Complete & Stay"

## Dependencies
- [ ] No task dependencies (can start immediately)
- [ ] Requires existing modal infrastructure

## Effort Estimate
- Size: M
- Hours: 8 hours
- Parallel: true (frontend work independent of backend)

## Definition of Done
- [ ] Component created with proper TypeScript types
- [ ] Form validation working correctly
- [ ] Loss calculation accurate
- [ ] Modal integrated with vessel cards
- [ ] Responsive design verified
- [ ] Component tests written
